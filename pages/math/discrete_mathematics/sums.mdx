import {Sequence} from "../../../components/hago/";
import { Plot } from "../../../components/hago";

<Metadata
	title={"Summation"}
	description={"Notes on summation"}
	keywords={"summation, discrete mathematics, computer science"}
/>

# Sequences & Sums

This chapter provides notes on sequences and summations.

## Sequences

A **sequence** is simply an ordered list of elements. Most commonly, such
elements are numbers:

$$
	\seq{1,2,3,4,5,6}
$$

But, they don't have to be numbers. A list of the most populous countries
on Earth is also a sequence:

$$
	\seq{\tt{China,} \tt{India,} \tt{United States,} \tt{Indonesia,} \ldots}
$$

Regardless, notice the syntax we use above. We denote a sequence with the
left and right wide-angle brackets. This is to communicate that the
collection has a certain order, distinguishing it from other collections
like sets and tuples.

Formally:

> **definition**. A _sequence_ is a function ${a_n}$ whose domain is the
> set of natural numbers ${\NN,}$ and whose image is some subset ${S}$ of
> the real numbers ${\RR.}$ Each member of the domain is called an _index_
> of the sequence, denoted ${n,}$ and each member of the image is called a
> _term_ of the sequence, denoted ${a_n.}$

To denote sequences, we often use the notation:

$$
	a_n
$$

where ${n}$ is some integer. The idea is, we use ${n}$ to define some
formula, and when we input values for ${n,}$ we get back the sequence's
terms. This is similar to what we'd see in a function:

$$
	a(n)
$$

Indeed, some textbooks will use the notation:

$$
	S(n)
$$

For those with a programming background, we can think of a sequence as a
sorted array of numbers `S`, and indexing into that array with some `int`
value ${i}$, e.g., $$\mm{S[$i$]},$$ will return some element of the array.

For example, suppose we have a sequence defined as:

$$
	a_n = n^2 + 1
$$

This sequence yields the terms:

| ${n}$      | ${a_n}$          |
| ---------- | ---------------- |
| 0          | ${0^2 + 1 = 1}$  |
| 1          | ${1^2 + 1 = 2}$  |
| 2          | ${2^2 + 1 = 5}$  |
| 3          | ${3^2 + 1 = 10}$ |
| 4          | ${4^2 + 1 = 17}$ |
| 5          | ${5^2 + 1 = 26}$ |
| 6          | ${6^2 + 1 = 37}$ |
| ${\vdots}$ | ${\vdots}$       |

Or, notationally:

$$
	\seq{1,2,5,10,17,26,37,\ldots}
$$

We could also plot the sequence visually:

<Sequence data={[{ f: (n) => n ** 2 + 1 }]} scale={40} />

Let's consider another sequence:

$$
	b_n = \dfrac{n}{3^n}
$$

The first few terms:

| ${n}$      | ${b_n}$               |
| ---------- | --------------------- |
| 0          | ${0/3^0 = 0}$         |
| 1          | ${1/3^1 = 1/3}$       |
| 2          | ${2/3^2 = 2/9}$       |
| 3          | ${3/3^3 = 3/9 = 1/3}$ |
| 4          | ${4/3^4= 4/81 = 1/3}$ |
| 5          | ${5/3^5 = 5/27}$      |
| 6          | ${6/3^6 = 6/729}$     |
| ${\vdots}$ | ${\vdots}$            |

Visually:

<Sequence data={[{ f: (n) => n / 3 ** n }]} scale={40} />

Here, we have a sequence whose terms get very small very quickly. Let's
consider another:

$$
	a_n = (-1)^{n-1} \paren{\dfrac{n}{2n-1}}
$$

This sequence looks like:

<Sequence
	data={[{ f: (n) => (-1) ** (n - 1) * (n / (2 * n - 1)) }]}
	scale={40}
/>

Now that we've seen some examples, let's examine some very common
sequences.

### Geometric Sequences

Consider the sequence:

$$
	a_n = a_1 r^{n-1}
$$

This sequence bears the terms:

$$
	\seq{\dfrac{1}{1}, \dfrac{1}{2}, \dfrac{1}{4}, \dfrac{1}{8}, \dfrac{1}{16}, \ldots }
$$

Graphically, we get:

<Sequence data={[{ f: (n) => 1 / 2 ** (n - 1) }]} scale={50} end={10} />

To determine this formula's sequence, it's often helpful to first check if
we see any patterns. In this case, the denominator is always some pattern
of ${2:}$

$$
	\begin{aligned}
		&2^0 = 1 \\
		&2^1 = 2 \\
		&2^2 = 4 \\
		&2^3 = 8 \\
		&2^4 = 16 \\
		&2^5 = 32 \\
		&2^6 = 64 \\
		&\vdots
		&2^n
	\end{aligned}
$$

Thus, we have the pattern:

$$
	\small \dfrac{1}{2^{1-1}}, \dfrac{1}{2^{2-1}}, \dfrac{1}{2^{3-1}}, \dfrac{1}{2^{4-1}}, \dfrac{1}{2^{5-1},} \ldots, \dfrac{1}{2^{n-1}}
$$

It follows that this sequence has the formula:

$$
	a_n = \dfrac{1}{2^{n-1}}
$$

This particular sequence is called the **geometric sequence** (or the
_geometric progression_), and it takes the form:

$$
	a_n = ar^2
$$

Formally:

> **definition**. A geometric progression is a sequence of the form:
>
> $$
> 	a, ar, ar^2, ar^3, \ldots, ar^n, \ldots,
> $$
>
> where ${a}$ is called the _initial term_, and ${r}$ is called the _common
> ratio_, both of which are real numbers.

In our example above, the common ratio is ${1.}$

As an aside, the geometric sequence's plot looks similar to the graph of
the exponential decay function ${f(x) = e^{-x}:}$

<Plot
	data={[{ f: (n) => Math.E ** (-1 * n) }]}
	scale={50}
	domain={[-4, 4]}
	range={[-4, 4]}
/>

## Sign-Alternating Sequences

Consider this sequence:

$$
	A_n = \seq{2, -4, 6, -8, 10, -12, 14, -16, \ldots}
$$

Here, we see that the terms have two characteristics:

1. The signum (plus or minus) alternates, and
2. All the terms are even integers.

We can decipher the pattern by constructing a definition that captures both
these properties. We'll focus on property (1) first. Since our index ${n}$
starts at ${1,}$ we can obtain even numbers with the formula:

$$
	2n
$$

This yields:

$$
	\seq{2(1), 2(2), 2(3), 2(4), 2(5), \ldots}
$$

That takes care of the first property. Now let's focus on the signum. We
can alternate between positive and negative through the _odd-even signum
rule_ for the integers: Given ${y = -1^{n},}$ if ${n}$ is even, then
${y = 1,}$ and if ${n}$ is odd, then ${y = -1.}$ Accordingly, we have:

$$
	2n(-1^{n+1})
$$

This gives us the following:

| ${n}$      | ${2n(-1)^{n+1}}$                  | ${A_n}$    |
| ---------- | --------------------------------- | ---------- |
| ${1}$      | ${2(1)(-1)^{1+1} = 2(1)(-1)^{2}}$ | ${2}$      |
| ${2}$      | ${2(2)(-1)^{2+1} = 2(2)(-1)^{3}}$ | ${-4}$     |
| ${3}$      | ${2(3)(-1)^{3+1} = 2(3)(-1)^{4}}$ | ${6}$      |
| ${4}$      | ${2(4)(-1)^{4+1} = 2(4)(-1)^{5}}$ | ${-8}$     |
| ${5}$      | ${2(5)(-1)^{5+1} = 2(5)(-1)^{6}}$ | ${10}$     |
| ${6}$      | ${2(6)(-1)^{6+1} = 2(6)(-1)^{7}}$ | ${-12}$    |
| ${\vdots}$ | ${\vdots}$                        | ${\vdots}$ |

This sequence has the plot:

<Sequence
	data={[{ f: (n) => 2 * n * (-1) ** (n + 1) }]}
	scale={50}
	start={0}
	end={10}
/>

Interestingly, with enough inputs, alternating sequences tend to produce
plots that look like pine trees:

<Sequence
	data={[{ f: (n) => 2 * n * (-1) ** (n + 1) }]}
	scale={50}
	start={0}
	end={300}
/>

## Summations

A **series** is the sum (i.e., a _summation_) of all terms in some
sequence. In mathematics, we use **Sigma notation** to express series:

$$
	\sum\limits_{k=i}^{n} S_k
$$

In the notation above, the ${k = i}$ tells us where the sequence _starts_.
That is, if we were to add all of the sequence's terms from left to right,
which term we would start with first. The ${S}$ provides the summation
formula ‚Äî the sequence formula rewritten in terms of ${k.}$ The ${n}$ tells
us where the sequence _ends_ ‚Äî if we were to add all of the sequence's
terms from left to right, which term we would finish on. It's often the
case that the end is left as ${n,}$ to indicate that we can end wherever
we'd like and ${S}$ remains true. Putting it all together:

$$
	\sum\limits_{\tt{start}}^{\tt{end}} \tt{formula in terms of start}
$$

For example, suppose we have the sequence:

$$
	\seq{\dfrac{1^2}{2}, \dfrac{2^2}{2}, \dfrac{3^2}{2}, \dfrac{4^2}{2}, \ldots}
$$

Examining the pattern, we see that we can define this sequence as:

$$
	a_n = \dfrac{n^2}{2}
$$

When someone asks about the sum of all these terms, we could write:

$$
	S_n = \dfrac{1^2}{2} + \dfrac{2^2}{2} + \dfrac{3^2}{2} + \dfrac{4^2}{2} + \ldots + \dfrac{n^2}{2}
$$

And in fact, there's nothing wrong with the notation above. It turns out,
however, that we can manipulate summations algebraically, as we'll see in a
later section. Those manipulation techniques cannot be done with the
notation above. Moreover, it would be cumbersome to have to write that long
expression over and over again. Fortunately, summation notation provides a
cleaner way:

$$
	\sum\limits_{k=1}^{n} \dfrac{k^2}{2}
$$

This notation tells us that we can compute the sum by plugging in
incrementing values of ${k}$ ‚Äî ${k = 1,}$ ${k=2,}$ ${k=3,}$ and so on, al
the way up to ${k = n:}$

$$
	\dfrac{n^2}{2}
$$

Even better, the ${n}$ in the notation allows us to set an _upper bound_
for the sum. For exampe, the notation:

$$
	\sum\limits_{k=1}^{n=12} \dfrac{k^2}{2}
$$

ecapsulates the entire expression:

$$
\small
	\dfrac{1^2}{2} +
	\dfrac{2^2}{2} +
	\dfrac{3^2}{2} +
	\dfrac{4^2}{2} +
	\dfrac{5^2}{2} +
	\dfrac{6^2}{2} +
	\dfrac{7^2}{2} +
	\dfrac{8^2}{2} +
	\dfrac{9^2}{2} +
	\dfrac{10^2}{2} +
	\dfrac{11^2}{2} +
	\dfrac{12^2}{2}
$$

Needless to say, summation notation is much more concise and slick. Let's
see another example.

## Application: Annuities

Loans, lotteries, investments, bonds ‚Äî these are all instances of
annuities. The annuity is defined as follows:

> **definition**. An ùëõ-year ùëö-payment annuity is a function that outputs ùëö
> dollars at the start of each year, for ùëõ years.

Some annuities are better than others. Why? Because a dollar today is worth
more than a dollar tomorrow. Future dollars lose value because of
inflation, and there's a chance we may never get those dollars. On the
other hand, present dollars can collect interest or be used for
investments. It follows that a million dollars today is better than
${50,000}$ a year for ${20}$ years.

But what if the option was ${700,000}$ now versus ${50,000}$ a year for
${20}$ years? On the one hand, we're getting a sizeable sum now. On the
other hand, he overall amount we're getting over two decades is greater.
What if it were ${500,000}$ now? ${200,000}$?

The first step is to determine how much a dollar today is worth in a year.

### How Much Is a Dollar Today Worth in a Year?

To answer this question, we make an assumption: The rate at which money is
devalued is a fixed interest rate ${P.}$ Following this assumption, it
follows that:

$$
\begin{aligned}
	&\$1 \tt{today} =~\$(1 + P) \tt{in 1 year} \\
	&\$1 \tt{today} =~\$(1 + P^2) \tt{in 2 years} \\
	&\$1 \tt{today} =~\$(1 + P^3) \tt{in 3 years} \\
	&\$1 \tt{today} =~\$(1 + P^4) \tt{in 4 years} \\
	&\$1 \tt{today} =~\$(1 + P^5) \tt{in 5 years} \\
	\vdots \\
\end{aligned}
$$

### How Much Is a Dollar in a Year Worth Today?

Using the same assumption from the previous question, we simply divide:

$$
\begin{aligned}
	&\$ \dfrac{1}{1+P} = \$1 \tt{in 1 year} \\
	&\$ \dfrac{1}{1+P^2} = \$1 \tt{in 2 years} \\
	&\$ \dfrac{1}{1+P^3} = \$1 \tt{in 3 years} \\
	&\$ \dfrac{1}{1+P^4} = \$1 \tt{in 4 years} \\
	&\$ \dfrac{1}{1+P^5} = \$1 \tt{in 5 years} \\
	&\vdots
\end{aligned}
$$

### The Annuity's Current Value

Using our answers from the previous questions, the annuities current value
is the sum of each payment's worth today:

|       Current Value        |         Payment          |
| :------------------------: | :----------------------: |
|           ${m}$            | ${m}$ in 0 years (today) |
|    ${\dfrac{m}{1 + P}}$    |     ${m}$ in 1 year      |
|   ${\dfrac{m}{1 + P^2}}$   |     ${m}$ in 2 years     |
|   ${\dfrac{m}{1 + P^3}}$   |     ${m}$ in 3 years     |
|   ${\dfrac{m}{1 + P^4}}$   |     ${m}$ in 4 years     |
|         ${\vdots}$         |        ${\vdots}$        |
| ${\dfrac{m}{1 + P^{n-1}}}$ |  ${m}$ in ${n-1}$ years  |

The value of the annuity is the sum of all the current values:

$$
	\tt{total current value} = V = \sum\limits_{i=0}^{n-1} \dfrac{m}{(1+P)^i}
$$

Let's rewrite this equation in a more familiar form. To do so, we'll
suppose that:

$$
	x = \dfrac{1}{1+p}
$$

and factoring out the ${m,}$ we get:

$$
	V = m \sum\limits_{i=0}^{n-1} x^i
$$

Rewriting it this way, we can readily express the summation in _closed
form_:

$$
		V = m \dfrac{1-x^n}{1-x}
$$

Why can we do this? Because of the theorem:

> __theorem__. For all ${n \geq 1}$ and ${x \neq 1,}$ the following is true:
>
> $$
> 	\sum\limits_{i=0}^{n-1} x^i = \dfrac{1-x^n}{1-x}
> $$

## The Perturbation Method
