import { Graph } from "../../../components/illus/components/Graph/Graph";
import { TableMatrix } from "../../../components/illus/components/TableMatrix/TableMatrix";
import { CartesianProduct } from "../../../components/illus/components/CartesianProduct/CartesianProduct";

<head>
	<title>Graph Theory</title>
	<description>Notes on graph theory.</description>
</head>

# Graph Theory

1. [What is a Graph?](#what-is-a-graph)
2. [Adjacence and Incidence](#adjacence-and-incidence)
	1. [Degrees of a Node](#degrees-of-a-node)
3. [Simple Graphs](#simple-graphs)
4. [Bipartite Graphs](#bipartite-graphs)
5. [The Coloring Problem](#the-coloring-problem)
	1. [Finding Chromatic Numbers](#finding-chromatic-numbers)

Question: On average, who has more opposite gender partners, men or women?
On its face, it seems as if this question can only be solved with
statistics. It turns out, however, that we can solve this with discrete
mathematics. Specifically, a branch of discrete mathematics called **graph
theory**. To see how, we'll start with some basic concepts.

## What is a Graph?

Informally, a graph consists of dots connected with lines:

<Graph
	data={[
		{ link: ["a", "b"] },
		{ link: ["b", "c"] },
		{ link: ["c", "d"] },
		{ link: ["d", "a"] },
		{ link: ["d", "e"] },
		{ link: ["e", "f"] },
		{ link: ["e", "g"] },
	]}
	id={"intro1"}
	collisionRadius={40}
	straightEdges={true}
	scale={60}
	width={280}
	height={200}
/>

More formally:

> __definition__. A graph ${G}$ is a pair of sets ${(V, E)}$ where ${V}$ is a
> non-empty set of elements called _vertices_ or _nodes_, and ${E}$ is a
> set of 2-element subsets of ${V}$ called _edges_.

For example, with the graph above, the vertices and edges are:

$$
	V = \{ a, b, c, d, e, f, g \} \\[1em]
	E = \{ (a,b), (b,c), (c,d), (d,a), (d,e), (e,f), (e,g) \}
$$

Note that the above definition requires that the set of all nodes is
non-empty. Empty graphs are useful for some areas of graph theory, but
we'll get to those later. For now, we follow the definition that all graphs
have at least one node. That said, it's perfectly fine to have a graph with
no edges:

<Graph
	data={[{ link: ["a"] }, { link: ["b"] }, { link: ["c"] }]}
	collisionRadius={40}
	straightEdges={true}
	scale={40}
	width={280}
	height={200}
	id={"no_edges_1"}
/>

## Adjacence and Incidence

From our graph definition, we see that an edge consists of two nodes. The
two nodes on an edge are said to be **adjacent** to one another.

> __definition__. Two nodes ${a}$ and ${b}$ are _adjacent_ iff
> ${\{ a,b \} \in E.}$

For example, in the graph:

<Graph
	data={[{ link: ["a", "b"] }, { link: ["b", "c"] }]}
	collisionRadius={30}
	straightEdges={true}
	scale={40}
	width={280}
	height={180}
	id={"adjacent_1"}
/>

The nodes ùëé and ùëè are adjacent, as well as the nodes ùëè and ùëê. But, the
nodes ùëé and ùëê are not adjacent. Closely related is the notion of
**incidence**.

> __definition__. An edge ${e = \{ a, b \}}$ is _incident_ to its endpoints
> ${a}$ and ${b.}$

For example, on the graph:

<Graph
	data={[
		{ link: ["a", "b"], id: "e_1" },
		{ link: ["b", "c"], id: "e_2" },
		{ link: ["b", "d"], id: "e_3" },
	]}
	collisionRadius={30}
	straightEdges={true}
	scale={40}
	width={280}
	height={180}
	id={"incident_1"}
/>

the edge ${e_1}$ is incident to the nodes ${a}$ and ${b,}$ and the edge
${e_2}$ is incident to the nodes ${b}$ and ${c.}$ The edge ${e_3}$ is
incident to the nodes ${b}$ and ${d,}$ but not to the nodes ${a}$ or ${c.}$

### Degrees of a Node

A node might be adjacent to many nodes. For example, in the graph:

<Graph
	data={[
		{ link: ["a", "b"], id: "e_1" },
		{ link: ["b", "c"], id: "e_2" },
		{ link: ["b", "d"], id: "e_3" },
		{ link: ["b", "e"], id: "e_4" },
		{ link: ["b", "f"], id: "e_5" },
		{ link: ["b", "g"], id: "e_6" },
	]}
	collisionRadius={30}
	straightEdges={true}
	scale={40}
	width={280}
	height={180}
	id={"degree_1"}
/>

the node ${b}$ is adjacent to 6 nodes. Because of this fact, we say that
the node ${b}$ has a **degree** of ${6.}$

> __definition__. The number of edges adjacent to a node ${n}$ is the
> _degree_ of the node ${n.}$

## Simple Graphs

In the first few sections, we'll only be considering **simple graphs**. A
simple graph is defined as follows:

> __definition__. A graph is a _simple graph_ iff it has no loops or multiple
> edges.

A loop is an edge that connects a node to itself. For example in the graph:

<Graph
	data={[
		{ link: ["a", "b"], id: "e_1" },
		{ link: ["b", "c"], id: "e_2" },
		{ link: ["c", { id: "d", dx: -12 }], id: "e_3" },
		{ link: ["d", "d"], id: "e_4" },
	]}
	collisionRadius={30}
	scale={40}
	width={280}
	height={180}
	id={"loop_1"}
/>

the edge ${e_4}$ is a loop ‚Äî it connects the node ${d}$ to itself. A
**multiple edge** or **multiedge**, is an edge that connects a node ${n}$
to a node ${m,}$ and a node ${m}$ to a node ${n.}$ E.g., in the graph:

<Graph
	data={[
		{ link: ["a", "b"] },
		{ link: ["b", "a"], id: "e_1" },
		{ link: ["b", "c"], id: "e_2" },
		{ link: ["c", { id: "d", dx: -12 }], id: "e_3" },
		{ link: ["d", "d"], id: "e_4" },
	]}
	collisionRadius={20}
	scale={40}
	width={280}
	height={180}
	id={"multiedge_1"}
/>

The edge ${e_1}$ is a multiedge. It connects ${a}$ to ${b}$ and ${b}$ to
${a.}$

## Bipartite Graphs

Let's get back to our original question. To help us answer the question,
we're going to visualize the problem as a mapping from the set of all men
to the set of all women. The graph might look like:

<Bipartite
	data={[
		{ link: ["m_1", "w_1"] },
		{ link: ["m_2", "w_2"] },
		{ link: ["m_3", "w_3"] },
		{ link: ["m_3", "w_1"] },
		{ link: ["m_4", "w_2"] },
		{ link: ["m_5", "w_2"] },
		{ link: ["m_6", "w_4"] },
		{ link: ["m_6", "w_3"] },
	]}
	scale={40}
	isDirected={false}
	height={300}
	marginTop={10}
	marginBottom={10}
	groups={["M", "W"]}
	id={"sex_demo1"}
/>

This particular graph is called a **bipartite graph**. In the graph above,
the set ùëÄ is the set of all men in the United States (about
${162~400~000}$), and the set ùëä is the set of all women in the United
States (about ${167~500~000}$). The sum of both these sets is the overall
population of the United States, which is roughly 300 million:

$$
	\text{card}(M) + \text{card}(W) = 329~900~000
$$

Thus, the cardinality of our graphs vertices is:

$$
	\text{card}(V) = 329~900~000
$$

What about the cardinality of the edges? That's an unknown:

$$
	\text{card}(E) = n
$$

However, we don't actually need to know the cardinality of the edges to
answer the question. The question was: On average, who has more sexual
partners, men or women? Accordingly, this is a ratio problem. And because
it's a ratio problem, all we really need is a comparison of the average
degree of a man node and a woman node. We'll done the average with a
variable:

> Let ${A_m}$ be the average number of opposite gender partners for men.
> Let ${A_w}$ be the average number of opposite gender partners for women.

With these variables in place, the question is:

> What is the value of ${\dfrac{A_m}{A_w}}$?

This is a much more manageable problem. All we have to do is figure out the
values of ${A_m}$ and ${A_w}$ respectively. We can find ${A_m}$ by simply
adding all the degrees, and dividing by the number of nodes:

$$
	A_m = \dfrac{ \sum\limits^{m \in M} \text{deg}(m)}{\text{card}(M)}
$$

Since we're adding all of the degrees of all the nodes in ùëÄ, the numerator
is actually just the cardinality of ${E:}$

$$
	A_m = \dfrac{ \sum\limits^{m \in M} \text{deg}(m)}{\text{card}(M)} = \dfrac{\text{card}(E)}{\text{card}(M)}
$$

We use the same thought process for ${A_w}$:

$$
	A_w = \dfrac{ \sum\limits^{w \in W} \text{deg}(w)}{\text{card}(W) } = \dfrac{\text{card}(E)}{\text{card}(W)}
$$

Now we just plug in our manipulated expressions:

$$
\begin{aligned}
	\dfrac{A_m}{A_w} &= \dfrac{ \dfrac{\text{card}(E)}{\text{card}(M)} }{ \dfrac{\text{card}(E)}{\text{card}(W)} } \\[2.5em]
	&= \dfrac{ \dfrac{\cancel{\text{card}(E)}}{\text{card}(M)} }{ \dfrac{\cancel{\text{card}(E)}}{\text{card}(W)} } \\[2.5em]
	&= \dfrac{\text{card}(W)}{\text{card}(M)}
\end{aligned}
$$

That's nice expression ‚Äî we know the sizes of those sets:

$$
\begin{aligned}
	\dfrac{\text{card}(W)}{\text{card}(M)} &= \dfrac{167~500~000}{162~400~000} \\[2em]
	&= \dfrac{167~500~000}{162~400~000} \\[2em]
	&= 1.0314
\end{aligned}
$$

This tells us that men, on average, have rougly 3% more opposite gender
partners than women. No surveys were needed ‚Äî just the population numbers
alone are enough to prove this. More imporantly, it has nothing to do with
whether or not men are more promiscuous than women, or whether women are
more "reserved." It's purely because of the population's relative sizes and
graph theory matching.

## The Coloring Problem

Graph theory is used extensively for scheduling. For example, consider how
a state's flagship university, say the University of Illinois at
Urbana-Champaign, might schedule final exams. These universities offer
hundreds of courses, all of which must administer their exams within a
narrow time frame. The exams vary in length, and there are more exam
administrations than there are test-taking locations. Because of these
constraints, the university faces potential conflicts. How does the
university minimize these conflicts?

Well, let's consider an illustrative case, with just five courses:

<Graph
	data={[
		{ link: ["a", "b"] },
		{ link: ["b", "c"] },
		{ link: ["c", "d"] },
		{ link: ["d", "b"] },
		{ link: ["c", "a"] },
		{ link: ["d", "e"] },
	]}
	id={"scheduling1"}
	collisionRadius={40}
	straightEdges={true}
	scale={40}
	width={280}
	height={200}
/>

Each of the nodes in the graph above is a course. Now suppose the available
time slots are:

| slot | time              |
| ---- | ----------------- |
| S    | Wednesday, 12-2pm |
| T    | Wednesday, 2-4pm  |
| U    | Wednesday, 4-6pm  |
| V    | Wednesday, 6-8pm  |
| W    | Wednesday, 8-10pm |

The goal is to assign different slots to each node, such that adjacent
nodes do not have the same slot. This scheduling problem is a variant of a
more general problem called the _coloring problem_.

> _Coloring Problem_. Given a graph ${G}$ and ${k}$ colors, assign a color
> to each node of ${G,}$ such that adjacent nodes have different colors.

The minimum number of colors we need to solve a coloring problem is called
the graph's **chromatic number**.

> __definition__. The minimum number of colors needed to solve a coloring
> problem is called the graph ${G}$'s _chromatic number_, denoted
> ${\Chi(g).}$

For our scheduling problem, a color is analogous to a time slot.
Accordingly, we want to give each node a different element from the set of
ùëÜ, ùëá, ùëà, ùëâ, and ùëä. If we use all five available time slots, the answer's
straightforward:

<Graph
	data={[
		{ link: ["a~S", "b~T"] },
		{ link: ["b~T", "c~V"] },
		{ link: ["c~V", "d~U"] },
		{ link: ["d~U", "b~T"] },
		{ link: ["c~V", "a~S"] },
		{ link: ["d~U", "e~W"] },
	]}
	id={"scheduling2"}
	collisionRadius={40}
	straightEdges={true}
	scale={40}
	width={280}
	height={200}
/>

Can we do better? Sure, the course ùëí can use the time slot ùëâ. The only
other node assigned ùëâ is the node ùëê, and the nodes ùëí and ùëê are not
adjacent:

<Graph
	data={[
		{ link: ["a~S", "b~T"] },
		{ link: ["b~T", "c~V"] },
		{ link: ["c~V", "d~U"] },
		{ link: ["d~U", "b~T"] },
		{ link: ["c~V", "a~S"] },
		{ link: ["d~U", "e~V"] },
	]}
	id={"scheduling3"}
	collisionRadius={40}
	straightEdges={true}
	scale={40}
	width={280}
	height={200}
/>

Now the students in course ùëí don't have to take their exam so late. Can we
do better? Get away with three time slots? It turns out we can:

<Graph
	data={[
		{ link: ["a~S", "b~T"] },
		{ link: ["b~T", "c~U"] },
		{ link: ["c~U", "d~S"] },
		{ link: ["d~S", "b~T"] },
		{ link: ["c~U", "a~S"] },
		{ link: ["d~S", "e~T"] },
	]}
	id={"scheduling4"}
	collisionRadius={40}
	straightEdges={true}
	scale={40}
	width={280}
	height={200}
/>

Now the latest exam starts at 4pm. Even better. Can we get that time to
2pm? I.e., with just two time slots? Unfortunately, three is where the road
ends. Why? Because of the triangular connection between ${a, b, c}$ (or
${b, c, d}$). Because of this triangular connection, a minimum of three
time slots is needed. Thus, we can conclude that the chromatic number for
this graph is ${3.}$

### Finding Chromatic Numbers

In general, solving coloring problems is _very_ challenging. We do not have
any good algorithms for finding chromatic numbers. What's fascinating about
the coloring problem is that it's very easy to verify that a given coloring
‚Äî a solution to a coloring problem ‚Äî is correct. Finding that coloring,
however, is remarkably difficult. As far as we know, finding a chromatic
number requires trying an exponential number of
possibilities.[^np_complete]

Of course, we can't just throw our hands in the air and call it a day
whenever we see problems like coloring. We must have some way of solving
them. A simple algorithm is the greedy approach:

1. Order the nodes ${v_0, v_2, \ldots, v_n.}$
2. Order the colors ${c_0, c_2, \ldots, c_n.}$
3. Let ${i = 0.}$
4. While ${i \leq n,}$ assign the lowest legal color.

The algorithm above will result in a colored graph. We can, however,
improve it:

1. Order the nodes ${v_0, v_2, \ldots, v_n,}$ where ${v_0}$ is the node
   with the largest degree, and ${v_n}$ is the node with the smallest
   degree.
2. Order the colors ${c_0, c_2, \ldots, c_n.}$
3. Let ${i = 0.}$
4. While ${i \leq n,}$ assign the lowest legal color.

By coloring the largest-degree node first, we are much more likely to find
conflicts ahead of time. And by finding those conflicts first, we can
assign colors to get around those conflicts. If we left the largest-degree
node for last, the algorithm will have to use more colors ‚Äî it can't "go
back and redo".

[^np_complete]:
    The coloring problem is just one example of an NP-complete problem.
